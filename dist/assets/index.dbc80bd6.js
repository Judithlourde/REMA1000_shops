import{r as d,o as i,c as u,m as s,a as l,b as m,d as y,e as f,f as g}from"./vendor.ef0b10ac.js";const _=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};_();var p=(t,e)=>{const r=t.__vccOpts||t;for(const[a,o]of e)r[a]=o;return r};const h={};function v(t,e){const r=d("RouterView");return i(),u(r)}var k=p(h,[["render",v]]),w={state(){return{}}};const b={data(){return{mapbox_id:"pk.eyJ1IjoianVkaXRocGV0ZXIiLCJhIjoiY2wwZ2Zpa2RrMTJpcDNjcXRwbmYxenpiMyJ9.D4zoWLd-CJlmV2ojxd824Q",stores:[]}},created(){this.fetchStores(),this.fetchGeoCode()},methods:{async fetchGeoCode(){navigator.geolocation.getCurrentPosition(t=>{this.setupMap([t.coords.longitude,t.coords.latitude])})},async setupMap(t){s.accessToken=this.mapbox_id;const e=new s.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:t,zoom:12});new s.Marker({color:"green"}).setLngLat(t).addTo(e),this.stores.forEach(r=>{const a=document.createElement("div");a.className="marker",a.style.backgroundImage="url(/images/location-tag.svg)",a.style.backgroundSize="100%";const o=new s.Popup().setHTML(r.properties.shopName);new s.Marker(a).setLngLat([r.geometry.coordinates[0],r.geometry.coordinates[1]]).setPopup(o).addTo(e)}),e.addControl(new s.NavigationControl),e.addControl(new MapboxDirections({accessToken:s.accessToken}),"top-left")},async fetchStores(){const t=`https://api.allorigins.win/get?url=${encodeURIComponent("https://rema.no/api/v2/stores")}`,e=await fetch(t);try{const r=await e.json(),o=JSON.parse(r.contents).results;this.storesData(o)}catch(r){console.log(r)}},storesData(t){this.stores=t.map(e=>({type:"StoresCollection",properties:{shopName:e.name,municipalityName:e.municipalityName,message:e.name,openingHours:{Monday:e.openingHours.Monday,Tuesday:e.openingHours.Tuesday,Wednesday:e.openingHours.Wednesday,Thursday:e.openingHours.Thursday,Friday:e.openingHours.Friday,Saturday:e.openingHours.Saturday,Sunday:e.openingHours.Sunday}},geometry:{type:"Point",coordinates:[e.longitude,e.latitude]}}))}}},x={id:"map"};function H(t,e,r,a,o,n){return i(),l("div",x,"Home")}var M=p(b,[["render",H]]),L=[{name:"home",path:"/",component:M}];const S=m(w),C=y({routes:L,history:f()});g(k).use(S).use(C).mount("#app");
